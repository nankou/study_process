<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>为什么要用Promise</title>
</head>

<body>
    <script>
        /* 什么是promise */
        // 是Js异步编程的一种解决方案。已经被ES6纳入规范中，

        /* 为什么要用promise */
        // 1、指定回调函数的方式更加灵活：
        // 旧的：必须在启动异步任务前指定
        // promise： 启动异步任务 => 返回promise对象 => 给promise对象绑定回调函数（甚至可以在异步之后
        // // 2、支持链式调用，可以解决回调地狱问题
        // 什么是回调地狱？回调函数嵌套调用，外部回调函数异步执行的结果是嵌套的回调函数执行的条件
        // 回调地狱的缺点？ 不便于阅读 / 不便于异常处理
        // 代码臃肿、可读性差、耦合度过高、代码复用性差、

        // 解决方案？ promise链式调用
        // 终极解决方案？ async / await


        const p = new Promise((resolve, rejected) => {
            throw new Error('出错了')
        })
        p.then(
            value => {},
            reason => {
                console.log('reason', reason)
            }
        )
        p.then(
            value => {},
            reason => {
                console.log('reason', reason)
            }
        )

        // promise的常规写法
        new Promise()
            .then()
            .then()
            .then()
    </script>
</body>

</html>